        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>OrbitCameraController class / spectre Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="spectre" data-type="OrbitCameraController">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../spectre.html">spectre</a> &rsaquo; <a href="../spectre/OrbitCameraController.html">OrbitCameraController</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>OrbitCameraController</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<pre class="source">
class OrbitCameraController extends CameraController {
 num mouseSensitivity = 360.0;
 num zoomSpeed = 10.0;

 num accumDX = 0.0;
 num accumDY = 0.0;
 num accumDZ = 0.0;

 num yaw = 0.0;
 num pitch = 50.5;
 num radius = 100.0;

 num minYaw = -Math.PI * 0.25;
 num maxYaw = Math.PI * 0.33;
 num minRadius = 50.0;
 num maxRadius = 250.0;

 num momentumDuration = 0.650;

 bool hasMomentum = true;
 bool hasFriction = true;

 Vector2 _momentum = new Vector2.zero();
 num _momentumTime = 0;

 OrbitCameraController();

 void updateCamera(num dt, Camera cam) {
   if(accumDX != 0 || accumDY != 0) {
     _momentum.x = accumDX/mouseSensitivity;
     _momentum.y = accumDY/mouseSensitivity;

     accumDX = 0;
     accumDY = 0;

     _momentumTime = 0;
   }

   if(accumDZ !=0) {
     _ZoomView(dt, accumDZ);
     accumDZ = 0;
   }

   _RotateView(dt, cam, _momentum.x, _momentum.y);

   _ApplyFriction(dt);
 }

 double _clamp(double v, double min, double max) {
   if (v &gt; maxRadius) {
     return maxRadius;
   }
   if (v &lt; minRadius) {
     return minRadius;
   }
   return v;
 }

 void _ZoomView(num dt, num zoomDelta) {
   radius = _clamp(radius + zoomDelta, minRadius, maxRadius);
   // TODO: Exponential zoom?
   // TODO: Incorporate dt
 }

 void _RotateView(num dt, Camera cam, num yawDelta, num pitchDelta) {
   yaw += yawDelta;
   pitch = _clamp(pitch + pitchDelta, minYaw, maxYaw);
   Vector3 offset = new Vector3(
     radius * Math.cos(yaw) * Math.cos(pitch),
     radius * Math.sin(pitch),
     radius * Math.sin(yaw) * Math.cos(pitch)
   );

   cam.position = cam.focusPosition + offset;
 }

 void _ApplyFriction(num dt) {
   if(!hasMomentum) {
     _momentum.x = 0.0;
     _momentum.y = 0.0;
     return;
   }

   if(!hasFriction) {
     return;
   }

   num momentumLen = _momentum.length;
   if(momentumLen == 0.0) {
     return;
   }

   _momentumTime += dt;

   if(_momentumTime &gt;= momentumDuration) {
     _momentum.x = 0.0;
     _momentum.y = 0.0;
     return;
   }

   momentumLen -= momentumLen * (_momentumTime / momentumDuration);
   _momentum.normalize();
   _momentum.scale(momentumLen);
 }
}
</pre>
</div>
<h3>Extends</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../spectre/CameraController.html">CameraController</a></span>&nbsp;&gt;&nbsp;<span class="type-box"><span class="icon-class"></span><strong>OrbitCameraController</strong></span></p>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="OrbitCameraController">
<button class="show-code">Code</button>
new <strong>OrbitCameraController</strong>() <a class="anchor-link" href="#OrbitCameraController"
              title="Permalink to OrbitCameraController.OrbitCameraController">#</a></h4>
<div class="doc">
<pre class="source">
OrbitCameraController();
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field"><h4 id="accumDX">
<button class="show-code">Code</button>
num         <strong>accumDX</strong> <a class="anchor-link"
            href="#accumDX"
            title="Permalink to OrbitCameraController.accumDX">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num accumDX = 0.0
</pre>
</div>
</div>
<div class="field"><h4 id="accumDY">
<button class="show-code">Code</button>
num         <strong>accumDY</strong> <a class="anchor-link"
            href="#accumDY"
            title="Permalink to OrbitCameraController.accumDY">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num accumDY = 0.0
</pre>
</div>
</div>
<div class="field"><h4 id="accumDZ">
<button class="show-code">Code</button>
num         <strong>accumDZ</strong> <a class="anchor-link"
            href="#accumDZ"
            title="Permalink to OrbitCameraController.accumDZ">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num accumDZ = 0.0
</pre>
</div>
</div>
<div class="field"><h4 id="hasFriction">
<button class="show-code">Code</button>
bool         <strong>hasFriction</strong> <a class="anchor-link"
            href="#hasFriction"
            title="Permalink to OrbitCameraController.hasFriction">#</a>
        </h4>
        <div class="doc">
<pre class="source">
bool hasFriction = true
</pre>
</div>
</div>
<div class="field"><h4 id="hasMomentum">
<button class="show-code">Code</button>
bool         <strong>hasMomentum</strong> <a class="anchor-link"
            href="#hasMomentum"
            title="Permalink to OrbitCameraController.hasMomentum">#</a>
        </h4>
        <div class="doc">
<pre class="source">
bool hasMomentum = true
</pre>
</div>
</div>
<div class="field"><h4 id="maxRadius">
<button class="show-code">Code</button>
num         <strong>maxRadius</strong> <a class="anchor-link"
            href="#maxRadius"
            title="Permalink to OrbitCameraController.maxRadius">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num maxRadius = 250.0
</pre>
</div>
</div>
<div class="field"><h4 id="maxYaw">
<button class="show-code">Code</button>
num         <strong>maxYaw</strong> <a class="anchor-link"
            href="#maxYaw"
            title="Permalink to OrbitCameraController.maxYaw">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num maxYaw = Math.PI * 0.33
</pre>
</div>
</div>
<div class="field"><h4 id="minRadius">
<button class="show-code">Code</button>
num         <strong>minRadius</strong> <a class="anchor-link"
            href="#minRadius"
            title="Permalink to OrbitCameraController.minRadius">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num minRadius = 50.0
</pre>
</div>
</div>
<div class="field"><h4 id="minYaw">
<button class="show-code">Code</button>
num         <strong>minYaw</strong> <a class="anchor-link"
            href="#minYaw"
            title="Permalink to OrbitCameraController.minYaw">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num minYaw = -Math.PI * 0.25
</pre>
</div>
</div>
<div class="field"><h4 id="momentumDuration">
<button class="show-code">Code</button>
num         <strong>momentumDuration</strong> <a class="anchor-link"
            href="#momentumDuration"
            title="Permalink to OrbitCameraController.momentumDuration">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num momentumDuration = 0.650
</pre>
</div>
</div>
<div class="field"><h4 id="mouseSensitivity">
<button class="show-code">Code</button>
num         <strong>mouseSensitivity</strong> <a class="anchor-link"
            href="#mouseSensitivity"
            title="Permalink to OrbitCameraController.mouseSensitivity">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num mouseSensitivity = 360.0
</pre>
</div>
</div>
<div class="field"><h4 id="pitch">
<button class="show-code">Code</button>
num         <strong>pitch</strong> <a class="anchor-link"
            href="#pitch"
            title="Permalink to OrbitCameraController.pitch">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num pitch = 50.5
</pre>
</div>
</div>
<div class="field"><h4 id="radius">
<button class="show-code">Code</button>
num         <strong>radius</strong> <a class="anchor-link"
            href="#radius"
            title="Permalink to OrbitCameraController.radius">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num radius = 100.0
</pre>
</div>
</div>
<div class="field"><h4 id="yaw">
<button class="show-code">Code</button>
num         <strong>yaw</strong> <a class="anchor-link"
            href="#yaw"
            title="Permalink to OrbitCameraController.yaw">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num yaw = 0.0
</pre>
</div>
</div>
<div class="field"><h4 id="zoomSpeed">
<button class="show-code">Code</button>
num         <strong>zoomSpeed</strong> <a class="anchor-link"
            href="#zoomSpeed"
            title="Permalink to OrbitCameraController.zoomSpeed">#</a>
        </h4>
        <div class="doc">
<pre class="source">
num zoomSpeed = 10.0
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="updateCamera">
<button class="show-code">Code</button>
void <strong>updateCamera</strong>(num dt, <a href="../spectre/Camera.html">Camera</a> cam) <a class="anchor-link" href="#updateCamera"
              title="Permalink to OrbitCameraController.updateCamera">#</a></h4>
<div class="doc">
<pre class="source">
void updateCamera(num dt, Camera cam) {
 if(accumDX != 0 || accumDY != 0) {
   _momentum.x = accumDX/mouseSensitivity;
   _momentum.y = accumDY/mouseSensitivity;

   accumDX = 0;
   accumDY = 0;

   _momentumTime = 0;
 }

 if(accumDZ !=0) {
   _ZoomView(dt, accumDZ);
   accumDZ = 0;
 }

 _RotateView(dt, cam, _momentum.x, _momentum.y);

 _ApplyFriction(dt);
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-06-13 15:38:32.817</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
