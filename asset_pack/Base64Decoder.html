        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>Base64Decoder class / asset_pack Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="asset_pack" data-type="Base64Decoder">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../asset_pack.html">asset_pack</a> &rsaquo; <a href="../asset_pack/Base64Decoder.html">Base64Decoder</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>Base64Decoder</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p>Decodes a raw base64 string.</p>
<p>Base64 is an encoding scheme that represents binary data as an ASCII
string. This is used to transfer binary data within text. As an example an image
can be embedded within a HTML page by Base64 encoding it.</p>
<p>The <a class="crossref" href="../asset_pack/Base64Decoder.html#Base64Decoder">Base64Decoder</a> reads raw strings, meaning it does not account for or recognize
line separators. This means it cannot be used for decoding MIME transfers.</p>
<pre class="source">
class Base64Decoder {
 /// The table used to decode the string.
 List&lt;int&gt; _decodingTable;

 /// Creates an instance of the Base64Decoder class.
 Base64Decoder() {
   _createDecodingTable();
 }

 /// Decodes the [encoded] string into an [Uint8List].
 Uint8List decode(String encoded) {
   assert(encoded.length % 4 == 0);
   // Create the buffer to store the decoded data into
   int decodedLength = _getDecodedBufferSize(encoded);
   Uint8List decoded = new Uint8List(decodedLength);

   int decodeIndex = 0;
   int encodeIndex = 0;
   int encodeLengthMinus4 = encoded.length - 4;

   int sextet0;
   int sextet1;
   int sextet2;
   int sextet3;
   int triple;

   // Run through everything but the last block of data
   // This makes it so padding can be ignored within this loop
   while (encodeIndex &lt; encodeLengthMinus4) {
     sextet0 = _decodingTable[encoded.codeUnitAt(encodeIndex++)] &lt;&lt; 18;
     sextet1 = _decodingTable[encoded.codeUnitAt(encodeIndex++)] &lt;&lt; 12;
     sextet2 = _decodingTable[encoded.codeUnitAt(encodeIndex++)] &lt;&lt;  6;
     sextet3 = _decodingTable[encoded.codeUnitAt(encodeIndex++)];
     triple  = sextet0 | sextet1 | sextet2 | sextet3;

     decoded[decodeIndex++] = (triple &amp; 0xff0000) &gt;&gt; 16;
     decoded[decodeIndex++] = (triple &amp; 0xff00)   &gt;&gt;  8;
     decoded[decodeIndex++] = (triple &amp; 0xff);
   }

   // Decode the last block of data
   sextet0 = _decodingTable[encoded.codeUnitAt(encodeIndex++)] &lt;&lt; 18;
   sextet1 = _decodingTable[encoded.codeUnitAt(encodeIndex++)] &lt;&lt; 12;
   sextet2 = _decodingTable[encoded.codeUnitAt(encodeIndex++)] &lt;&lt;  6;
   sextet3 = _decodingTable[encoded.codeUnitAt(encodeIndex++)];
   triple  = sextet0 | sextet1 | sextet2 | sextet3;

   decoded[decodeIndex++] = (triple &amp; 0xff0000) &gt;&gt; 16;

   if (decodedLength &gt; decodeIndex) {
     decoded[decodeIndex++] = (triple &amp; 0xff00) &gt;&gt; 8;

     if (decodedLength &gt; decodeIndex) {
       decoded[decodeIndex++] = (triple &amp; 0xff);
     }
   }

   // Return the ArrayBuffer
   return decoded;
 }

 /// Creates a table used to decode Base64 values.
 void _createDecodingTable() {
   // Create the encoding table first
   final List&lt;int&gt; encodingTable = [
     // A-Z [65-90]
     65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90,
     // a-z [97-122]
     97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122,
     // 0-9 [48-57]
     48, 49, 50, 51, 52, 53, 54, 55, 56, 57,
     // +
     43,
     // /
     47
   ];

   // Generate the decoding table
   _decodingTable = new List&lt;int&gt;.filled(256, 0);

   int encodingTableLength = encodingTable.length;

   for (int i = 0; i &lt; encodingTableLength; ++i) {
     _decodingTable[encodingTable[i]] = i;
   }
 }

 /// Computes the size needed to store the decoded data.
 ///
 /// Base64 encodes 4 bytes for each 3 bytes in the original data. Additionally
 /// '=' is used as a padding character when the total number of bytes is not
 /// a multiple of 3.
 static int _getDecodedBufferSize(String encoded) {
   int encodedLength = encoded.length;

   // For every 4 bytes of encoded data there is 3 bytes of decoded data
   int decodeLength = (encodedLength ~/ 4) * 3;

   // Check for padding
   if (encoded[encodedLength - 1] != '=') {
     return decodeLength;
   }

   // See if there's 2 or 1 bytes of padding
   return decodeLength - ((encoded[encodedLength - 2] == '=') ? 2 : 1);
 }
}
</pre>
</div>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="Base64Decoder">
<button class="show-code">Code</button>
new <strong>Base64Decoder</strong>() <a class="anchor-link" href="#Base64Decoder"
              title="Permalink to Base64Decoder.Base64Decoder">#</a></h4>
<div class="doc">
<p>Creates an instance of the Base64Decoder class.</p>
<pre class="source">
Base64Decoder() {
 _createDecodingTable();
}
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="decode">
<button class="show-code">Code</button>
Uint8List <strong>decode</strong>(String encoded) <a class="anchor-link" href="#decode"
              title="Permalink to Base64Decoder.decode">#</a></h4>
<div class="doc">
<p>Decodes the 
<span class="param">encoded</span> string into an <code>Uint8List</code>.</p>
<pre class="source">
Uint8List decode(String encoded) {
 assert(encoded.length % 4 == 0);
 // Create the buffer to store the decoded data into
 int decodedLength = _getDecodedBufferSize(encoded);
 Uint8List decoded = new Uint8List(decodedLength);

 int decodeIndex = 0;
 int encodeIndex = 0;
 int encodeLengthMinus4 = encoded.length - 4;

 int sextet0;
 int sextet1;
 int sextet2;
 int sextet3;
 int triple;

 // Run through everything but the last block of data
 // This makes it so padding can be ignored within this loop
 while (encodeIndex &lt; encodeLengthMinus4) {
   sextet0 = _decodingTable[encoded.codeUnitAt(encodeIndex++)] &lt;&lt; 18;
   sextet1 = _decodingTable[encoded.codeUnitAt(encodeIndex++)] &lt;&lt; 12;
   sextet2 = _decodingTable[encoded.codeUnitAt(encodeIndex++)] &lt;&lt;  6;
   sextet3 = _decodingTable[encoded.codeUnitAt(encodeIndex++)];
   triple  = sextet0 | sextet1 | sextet2 | sextet3;

   decoded[decodeIndex++] = (triple &amp; 0xff0000) &gt;&gt; 16;
   decoded[decodeIndex++] = (triple &amp; 0xff00)   &gt;&gt;  8;
   decoded[decodeIndex++] = (triple &amp; 0xff);
 }

 // Decode the last block of data
 sextet0 = _decodingTable[encoded.codeUnitAt(encodeIndex++)] &lt;&lt; 18;
 sextet1 = _decodingTable[encoded.codeUnitAt(encodeIndex++)] &lt;&lt; 12;
 sextet2 = _decodingTable[encoded.codeUnitAt(encodeIndex++)] &lt;&lt;  6;
 sextet3 = _decodingTable[encoded.codeUnitAt(encodeIndex++)];
 triple  = sextet0 | sextet1 | sextet2 | sextet3;

 decoded[decodeIndex++] = (triple &amp; 0xff0000) &gt;&gt; 16;

 if (decodedLength &gt; decodeIndex) {
   decoded[decodeIndex++] = (triple &amp; 0xff00) &gt;&gt; 8;

   if (decodedLength &gt; decodeIndex) {
     decoded[decodeIndex++] = (triple &amp; 0xff);
   }
 }

 // Return the ArrayBuffer
 return decoded;
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-06-13 15:38:32.178</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
