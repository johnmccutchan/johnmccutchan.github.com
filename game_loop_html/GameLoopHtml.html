        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>GameLoopHtml class / game_loop_html Library / Dart Documentation</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        </head>
        <body data-library="game_loop_html" data-type="GameLoopHtml">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">Dart Documentation</a>
         &rsaquo; <a href="../game_loop_html.html">game_loop_html</a> &rsaquo; <a href="../game_loop_html/GameLoopHtml.html">GameLoopHtml</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>GameLoopHtml</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p>The game loop </p>
<pre class="source">
class GameLoopHtml extends GameLoop {
 final Element element;
 int _frameCounter = 0;
 bool _initialized = false;
 bool _interrupt = false;
 double _previousFrameTime;
 double _frameTime = 0.0;
 double get frameTime =&gt; _frameTime;
 bool _resizePending = false;
 double _nextResize = 0.0;

 /** Seconds of accumulated time. */
 double get accumulatedTime =&gt; _accumulatedTime;

 /** Frame counter value. Incremented once per frame. */
 int get frame =&gt; _frameCounter;

 double maxAccumulatedTime = 0.03;
 double _accumulatedTime = 0.0;
 /** Width of game display [Element] */
 int get width =&gt; element.client.width;
 /** Height of game display [Element] */
 int get height =&gt; element.client.height;

 double _gameTime = 0.0;
 double get gameTime =&gt; _gameTime;

 double _renderInterpolationFactor = 0.0;
 double get renderInterpolationFactor =&gt; _renderInterpolationFactor;
 /** The minimum amount of time between two onResize calls in seconds*/
 double resizeLimit = 0.05;

 PointerLock _pointerLock;
 PointerLock get pointerLock =&gt; _pointerLock;

 Keyboard _keyboard;
 /** Keyboard. */
 Keyboard get keyboard =&gt; _keyboard;
 Mouse _mouse;
 /** Mouse. */
 Mouse get mouse =&gt; _mouse;
 GameLoopGamepad _gamepad0;
 Point _lastMousePos = new Point(0,0);
 /** Gamepad #0. */
 GameLoopGamepad get gamepad0 =&gt; _gamepad0;
 /** Touch */
 GameLoopTouchSet _touchSet;
 GameLoopTouchSet get touchSet =&gt; _touchSet;

 /** Construct a new game loop attaching it to [element] */
 GameLoopHtml(this.element) : super() {
   _keyboard = new Keyboard(this);
   _mouse = new Mouse(this);
   _gamepad0 = new GameLoopGamepad(this);
   _pointerLock = new PointerLock(this);
   _touchSet = new GameLoopTouchSet(this);
 }

 void _processInputEvents() {
   _processKeyboardEvents();
   _processMouseEvents();
   _processTouchEvents();
 }
 
 void _processKeyboardEvents() {
   for (KeyboardEvent keyboardEvent in _keyboardEvents) {
     DigitalButtonEvent event;
     bool down = keyboardEvent.type == "keydown";
     double time = GameLoop.timeStampToSeconds(keyboardEvent.timeStamp);
     int buttonId = keyboardEvent.keyCode;
     event = new DigitalButtonEvent(buttonId, down, frame, time);
     _keyboard.digitalButtonEvent(event);
   }
   _keyboardEvents.clear();
 }

 void _processMouseEvents() {
   mouse._resetAccumulators();
   // TODO(alexgann): Remove custom offset logic once dart:html supports natively (M6).
   final docElem = document.documentElement;
   final box = element.getBoundingClientRect();
   int canvasX = (box.left + window.pageXOffset - docElem.clientLeft).floor();
   int canvasY = (box.top  + window.pageYOffset - docElem.clientTop).floor();
   for (MouseEvent mouseEvent in _mouseEvents) {
     bool moveEvent = mouseEvent.type == 'mousemove';
     bool wheelEvent = mouseEvent.type == 'mousewheel';
     bool down = mouseEvent.type == 'mousedown';
     double time = GameLoop.timeStampToSeconds(mouseEvent.timeStamp);
     if (moveEvent) {
       int mouseX = mouseEvent.page.x;
       int mouseY = mouseEvent.page.y;
       int x = mouseX - canvasX;
       int y = mouseY - canvasY;
       int clampX = 0;
       int clampY = 0;
       bool withinCanvas = false;
       if(mouseX &lt; canvasX) {
         clampX = 0;
       } else if(mouseX &gt; canvasX+width) {
         clampX = width;
       } else {
         clampX = x;
         withinCanvas = true;
       }
       if(mouseY &lt; canvasY) {
         clampY = 0;
         withinCanvas = false;
       } else if(mouseY &gt; canvasY+height) {
         clampY = height;
         withinCanvas = false;
       } else {
         clampY = y;
       }
       
       int dx = mouseEvent.client.x-_lastMousePos.x;
       int dy = mouseEvent.client.y-_lastMousePos.y;
       _lastMousePos = mouseEvent.client;
       var event = new GameLoopMouseEvent(x, y, dx, dy, clampX, clampY, withinCanvas, time, frame);
       _mouse.gameLoopMouseEvent(event);
     } else if (wheelEvent) {
       WheelEvent wheel = mouseEvent as WheelEvent;
       _mouse._accumulateWheel(wheel.deltaX, wheel.deltaY);
     } else {
       int buttonId = mouseEvent.button;
       var event = new DigitalButtonEvent(buttonId, down, frame, time);
       _mouse.digitalButtonEvent(event);
     }
   }
   _mouseEvents.clear();
 }
 
 void _processTouchEvents() {
   for (_GameLoopTouchEvent touchEvent in _touchEvents) {
     switch (touchEvent.type) {
       case _GameLoopTouchEvent.Start:
         _touchSet._start(touchEvent.event);
         break;
       case _GameLoopTouchEvent.End:
         _touchSet._end(touchEvent.event);
         break;
       case _GameLoopTouchEvent.Move:
         _touchSet._move(touchEvent.event);
         break;
       default:
         throw new StateError('Invalid _GameLoopTouchEven type.');
     }
   }
   _touchEvents.clear();
 }

 int _rafId;

 void _requestAnimationFrame(num _) {
   if (_previousFrameTime == null) {
     _frameTime = time;
     _previousFrameTime = _frameTime;
     _processInputEvents();
     _rafId = window.requestAnimationFrame(_requestAnimationFrame);
     return;
   }
   if (_interrupt == true) {
     _rafId = null;
     return;
   }
   _rafId = window.requestAnimationFrame(_requestAnimationFrame);
   _frameCounter++;
   _previousFrameTime = _frameTime;
   _frameTime = time;
   double timeDelta = _frameTime - _previousFrameTime;
   _accumulatedTime += timeDelta;
   if (_accumulatedTime &gt; maxAccumulatedTime) {
     // If the animation frame callback was paused we may end up with
     // a huge time delta. Clamp it to something reasonable.
     _accumulatedTime = maxAccumulatedTime;
   }
   // TODO(johnmccutchan): Process input events in update loop.
   _processInputEvents();
   while (_accumulatedTime &gt;= updateTimeStep) {
     processTimers();
     _gameTime += updateTimeStep;
     if (onUpdate != null) {
       onUpdate(this);
     }
     _accumulatedTime -= updateTimeStep;
   }
   if(_resizePending == true &amp;&amp; onResize != null &amp;&amp; _nextResize &lt;= _frameTime){
     onResize(this);
     _nextResize = _frameTime + resizeLimit;
     _resizePending = false;
   }

   if (onRender != null) {
     _renderInterpolationFactor = _accumulatedTime/updateTimeStep;
     onRender(this);
   }
 }

 void _fullscreenChange(Event _) {
   if (onFullscreenChange == null) {
     return;
   }
   onFullscreenChange(this);
 }

 void _fullscreenError(Event _) {
   if (onFullscreenChange == null) {
     return;
   }
   onFullscreenChange(this);
 }

 final List&lt;_GameLoopTouchEvent&gt; _touchEvents = new List&lt;_GameLoopTouchEvent&gt;();
 void _touchStartEvent(TouchEvent event) {
   _touchEvents.add(new _GameLoopTouchEvent(event, _GameLoopTouchEvent.Start));
 }
 void _touchMoveEvent(TouchEvent event) {
   _touchEvents.add(new _GameLoopTouchEvent(event, _GameLoopTouchEvent.Move));
 }
 void _touchEndEvent(TouchEvent event) {
   _touchEvents.add(new _GameLoopTouchEvent(event, _GameLoopTouchEvent.End));
 }

 final List&lt;KeyboardEvent&gt; _keyboardEvents = new List&lt;KeyboardEvent&gt;();
 void _keyDown(KeyboardEvent event) {
   _keyboardEvents.add(event);
 }

 void _keyUp(KeyboardEvent event) {
   _keyboardEvents.add(event);
 }

 final List&lt;MouseEvent&gt; _mouseEvents = new List&lt;MouseEvent&gt;();
 void _mouseDown(MouseEvent event) {
   _mouseEvents.add(event);
 }

 void _mouseUp(MouseEvent event) {
   _mouseEvents.add(event);
 }

 void _mouseMove(MouseEvent event) {
   _mouseEvents.add(event);
 }

 void _mouseWheel(MouseEvent event) {
   _mouseEvents.add(event);
   event.preventDefault();
 }

 void _resize(Event _) {
   if (_resizePending == false) {
     _resizePending = true;
   }
 }

 /** Start the game loop. */
 void start() {
   if (_initialized == false) {
     document.onFullscreenError.listen(_fullscreenError);
     document.onFullscreenChange.listen(_fullscreenChange);
     window.onTouchStart.listen(_touchStartEvent);
     window.onTouchEnd.listen(_touchEndEvent);
     window.onTouchMove.listen(_touchMoveEvent);
     window.onKeyDown.listen(_keyDown);
     window.onKeyUp.listen(_keyUp);
     window.onResize.listen(_resize);

     window.onMouseMove.listen(_mouseMove);
     window.onMouseDown.listen(_mouseDown);
     window.onMouseUp.listen(_mouseUp);
     window.onMouseWheel.listen(_mouseWheel);
     _initialized = true;
   }
   _interrupt = false;
   _rafId = window.requestAnimationFrame(_requestAnimationFrame);
 }

 /** Stop the game loop. */
 void stop() {
   if (_rafId != null) {
     window.cancelAnimationFrame(_rafId);
     _rafId = null;
   }
   _interrupt = true;
 }

 /** Is the element visible on the screen? */
 bool get isVisible =&gt; document.visibilityState == 'visible' &amp;&amp; element.hidden == false;

 /** Is the element being displayed full screen? */
 bool get isFullscreen =&gt; document.fullscreenElement == element;

 /** Enable or disable fullscreen display of the element. */
 void enableFullscreen(bool enable) {
   if (enable) {
     element.requestFullscreen();
     return;
   }
   document.exitFullscreen();
 }

 /** Called when it is time to draw. */
 GameLoopRenderFunction onRender;

 /** Called when element is resized. */
 GameLoopResizeFunction onResize;
 /** Called when element enters or exits fullscreen mode. */
 GameLoopFullscreenChangeFunction onFullscreenChange;
 /** Called when the element moves between owning and not
  *  owning the pointer.
  */
 GameLoopPointerLockChangeFunction onPointerLockChange;
 /** Called when a touch begins. */
 GameLoopTouchEventFunction onTouchStart;
 /** Callled when a touch ends. */
 GameLoopTouchEventFunction onTouchEnd;
}
</pre>
</div>
<h3>Extends</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../game_loop_common/GameLoop.html">GameLoop</a></span>&nbsp;&gt;&nbsp;<span class="type-box"><span class="icon-class"></span><strong>GameLoopHtml</strong></span></p>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="GameLoopHtml">
<button class="show-code">Code</button>
new <strong>GameLoopHtml</strong>(Element element) <a class="anchor-link" href="#GameLoopHtml"
              title="Permalink to GameLoopHtml.GameLoopHtml">#</a></h4>
<div class="doc">
<p>Construct a new game loop attaching it to 
<span class="param">element</span> </p>
<pre class="source">
GameLoopHtml(this.element) : super() {
 _keyboard = new Keyboard(this);
 _mouse = new Mouse(this);
 _gamepad0 = new GameLoopGamepad(this);
 _pointerLock = new PointerLock(this);
 _touchSet = new GameLoopTouchSet(this);
}
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field"><h4 id="accumulatedTime">
<button class="show-code">Code</button>
final double         <strong>accumulatedTime</strong> <a class="anchor-link"
            href="#accumulatedTime"
            title="Permalink to GameLoopHtml.accumulatedTime">#</a>
        </h4>
        <div class="doc">
<p>Seconds of accumulated time. </p>
<pre class="source">
double get accumulatedTime =&gt; _accumulatedTime;
</pre>
</div>
</div>
<div class="field inherited"><h4 id="dt">
<button class="show-code">Code</button>
final double         <strong>dt</strong> <a class="anchor-link"
            href="#dt"
            title="Permalink to GameLoopHtml.dt">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../game_loop_common/GameLoop.html">GameLoop</a> </div><div class="doc">
<p>Time elapsed in current frame. </p>
<pre class="source">
double get dt =&gt; updateTimeStep;
</pre>
</div>
</div>
<div class="field"><h4 id="element">
<button class="show-code">Code</button>
final Element         <strong>element</strong> <a class="anchor-link"
            href="#element"
            title="Permalink to GameLoopHtml.element">#</a>
        </h4>
        <div class="doc">
<pre class="source">
final Element element
</pre>
</div>
</div>
<div class="field"><h4 id="frame">
<button class="show-code">Code</button>
final int         <strong>frame</strong> <a class="anchor-link"
            href="#frame"
            title="Permalink to GameLoopHtml.frame">#</a>
        </h4>
        <div class="doc">
<p>Frame counter value. Incremented once per frame. </p>
<pre class="source">
int get frame =&gt; _frameCounter;
</pre>
</div>
</div>
<div class="field"><h4 id="frameTime">
<button class="show-code">Code</button>
final double         <strong>frameTime</strong> <a class="anchor-link"
            href="#frameTime"
            title="Permalink to GameLoopHtml.frameTime">#</a>
        </h4>
        <div class="doc">
<div class="inherited">
<p>Seconds between requestAnimationFrameTime calls. </p>
<div class="docs-inherited-from">docs inherited from <a href="../game_loop_common/GameLoop.html">GameLoop</a> </div></div>
<pre class="source">
double get frameTime =&gt; _frameTime;
</pre>
</div>
</div>
<div class="field"><h4 id="gamepad0">
<button class="show-code">Code</button>
final <a href="../game_loop_html/GameLoopGamepad.html">GameLoopGamepad</a>         <strong>gamepad0</strong> <a class="anchor-link"
            href="#gamepad0"
            title="Permalink to GameLoopHtml.gamepad0">#</a>
        </h4>
        <div class="doc">
<p>Gamepad #0. </p>
<pre class="source">
GameLoopGamepad get gamepad0 =&gt; _gamepad0;
</pre>
</div>
</div>
<div class="field"><h4 id="gameTime">
<button class="show-code">Code</button>
final double         <strong>gameTime</strong> <a class="anchor-link"
            href="#gameTime"
            title="Permalink to GameLoopHtml.gameTime">#</a>
        </h4>
        <div class="doc">
<div class="inherited">
<p>Current time as seen by onUpdate calls. </p>
<div class="docs-inherited-from">docs inherited from <a href="../game_loop_common/GameLoop.html">GameLoop</a> </div></div>
<pre class="source">
double get gameTime =&gt; _gameTime;
</pre>
</div>
</div>
<div class="field"><h4 id="height">
<button class="show-code">Code</button>
final int         <strong>height</strong> <a class="anchor-link"
            href="#height"
            title="Permalink to GameLoopHtml.height">#</a>
        </h4>
        <div class="doc">
<p>Height of game display <code>Element</code> </p>
<pre class="source">
int get height =&gt; element.client.height;
</pre>
</div>
</div>
<div class="field"><h4 id="isFullscreen">
<button class="show-code">Code</button>
final bool         <strong>isFullscreen</strong> <a class="anchor-link"
            href="#isFullscreen"
            title="Permalink to GameLoopHtml.isFullscreen">#</a>
        </h4>
        <div class="doc">
<p>Is the element being displayed full screen? </p>
<pre class="source">
bool get isFullscreen =&gt; document.fullscreenElement == element;
</pre>
</div>
</div>
<div class="field"><h4 id="isVisible">
<button class="show-code">Code</button>
final bool         <strong>isVisible</strong> <a class="anchor-link"
            href="#isVisible"
            title="Permalink to GameLoopHtml.isVisible">#</a>
        </h4>
        <div class="doc">
<p>Is the element visible on the screen? </p>
<pre class="source">
bool get isVisible =&gt; document.visibilityState == 'visible' &amp;&amp; element.hidden == false;
</pre>
</div>
</div>
<div class="field"><h4 id="keyboard">
<button class="show-code">Code</button>
final <a href="../game_loop_html/Keyboard.html">Keyboard</a>         <strong>keyboard</strong> <a class="anchor-link"
            href="#keyboard"
            title="Permalink to GameLoopHtml.keyboard">#</a>
        </h4>
        <div class="doc">
<p>Keyboard. </p>
<pre class="source">
Keyboard get keyboard =&gt; _keyboard;
</pre>
</div>
</div>
<div class="field"><h4 id="maxAccumulatedTime">
<button class="show-code">Code</button>
double         <strong>maxAccumulatedTime</strong> <a class="anchor-link"
            href="#maxAccumulatedTime"
            title="Permalink to GameLoopHtml.maxAccumulatedTime">#</a>
        </h4>
        <div class="doc">
<div class="inherited">
<p>Maximum amount of time between subsequent request animation frame
calls that is accumulated. Accumulated time is used to drive onUpdate
calls.</p>
<div class="docs-inherited-from">docs inherited from <a href="../game_loop_common/GameLoop.html">GameLoop</a> </div></div>
<pre class="source">
double maxAccumulatedTime = 0.03
</pre>
</div>
</div>
<div class="field"><h4 id="mouse">
<button class="show-code">Code</button>
final <a href="../game_loop_html/Mouse.html">Mouse</a>         <strong>mouse</strong> <a class="anchor-link"
            href="#mouse"
            title="Permalink to GameLoopHtml.mouse">#</a>
        </h4>
        <div class="doc">
<p>Mouse. </p>
<pre class="source">
Mouse get mouse =&gt; _mouse;
</pre>
</div>
</div>
<div class="field"><h4 id="onFullscreenChange">
<button class="show-code">Code</button>
<a href="../game_loop_html/GameLoopFullscreenChangeFunction.html">GameLoopFullscreenChangeFunction</a>         <strong>onFullscreenChange</strong> <a class="anchor-link"
            href="#onFullscreenChange"
            title="Permalink to GameLoopHtml.onFullscreenChange">#</a>
        </h4>
        <div class="doc">
<p>Called when element enters or exits fullscreen mode. </p>
<pre class="source">
GameLoopFullscreenChangeFunction onFullscreenChange
</pre>
</div>
</div>
<div class="field"><h4 id="onPointerLockChange">
<button class="show-code">Code</button>
<a href="../game_loop_html/GameLoopPointerLockChangeFunction.html">GameLoopPointerLockChangeFunction</a>         <strong>onPointerLockChange</strong> <a class="anchor-link"
            href="#onPointerLockChange"
            title="Permalink to GameLoopHtml.onPointerLockChange">#</a>
        </h4>
        <div class="doc">
<p>Called when the element moves between owning and not
 owning the pointer.</p>
<pre class="source">
GameLoopPointerLockChangeFunction onPointerLockChange
</pre>
</div>
</div>
<div class="field"><h4 id="onRender">
<button class="show-code">Code</button>
<a href="../game_loop_html/GameLoopRenderFunction.html">GameLoopRenderFunction</a>         <strong>onRender</strong> <a class="anchor-link"
            href="#onRender"
            title="Permalink to GameLoopHtml.onRender">#</a>
        </h4>
        <div class="doc">
<p>Called when it is time to draw. </p>
<pre class="source">
GameLoopRenderFunction onRender
</pre>
</div>
</div>
<div class="field"><h4 id="onResize">
<button class="show-code">Code</button>
<a href="../game_loop_html/GameLoopResizeFunction.html">GameLoopResizeFunction</a>         <strong>onResize</strong> <a class="anchor-link"
            href="#onResize"
            title="Permalink to GameLoopHtml.onResize">#</a>
        </h4>
        <div class="doc">
<p>Called when element is resized. </p>
<pre class="source">
GameLoopResizeFunction onResize
</pre>
</div>
</div>
<div class="field"><h4 id="onTouchEnd">
<button class="show-code">Code</button>
<a href="../game_loop_html/GameLoopTouchEventFunction.html">GameLoopTouchEventFunction</a>         <strong>onTouchEnd</strong> <a class="anchor-link"
            href="#onTouchEnd"
            title="Permalink to GameLoopHtml.onTouchEnd">#</a>
        </h4>
        <div class="doc">
<p>Callled when a touch ends. </p>
<pre class="source">
GameLoopTouchEventFunction onTouchEnd
</pre>
</div>
</div>
<div class="field"><h4 id="onTouchStart">
<button class="show-code">Code</button>
<a href="../game_loop_html/GameLoopTouchEventFunction.html">GameLoopTouchEventFunction</a>         <strong>onTouchStart</strong> <a class="anchor-link"
            href="#onTouchStart"
            title="Permalink to GameLoopHtml.onTouchStart">#</a>
        </h4>
        <div class="doc">
<p>Called when a touch begins. </p>
<pre class="source">
GameLoopTouchEventFunction onTouchStart
</pre>
</div>
</div>
<div class="field inherited"><h4 id="onUpdate">
<button class="show-code">Code</button>
<a href="../game_loop_common/GameLoopUpdateFunction.html">GameLoopUpdateFunction</a>         <strong>onUpdate</strong> <a class="anchor-link"
            href="#onUpdate"
            title="Permalink to GameLoopHtml.onUpdate">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../game_loop_common/GameLoop.html">GameLoop</a> </div><div class="doc">
<p>Called once per game logic frame. </p>
<pre class="source">
GameLoopUpdateFunction onUpdate
</pre>
</div>
</div>
<div class="field"><h4 id="pointerLock">
<button class="show-code">Code</button>
final <a href="../game_loop_html/PointerLock.html">PointerLock</a>         <strong>pointerLock</strong> <a class="anchor-link"
            href="#pointerLock"
            title="Permalink to GameLoopHtml.pointerLock">#</a>
        </h4>
        <div class="doc">
<pre class="source">
PointerLock get pointerLock =&gt; _pointerLock;
</pre>
</div>
</div>
<div class="field"><h4 id="renderInterpolationFactor">
<button class="show-code">Code</button>
final double         <strong>renderInterpolationFactor</strong> <a class="anchor-link"
            href="#renderInterpolationFactor"
            title="Permalink to GameLoopHtml.renderInterpolationFactor">#</a>
        </h4>
        <div class="doc">
<pre class="source">
double get renderInterpolationFactor =&gt; _renderInterpolationFactor;
</pre>
</div>
</div>
<div class="field"><h4 id="resizeLimit">
<button class="show-code">Code</button>
double         <strong>resizeLimit</strong> <a class="anchor-link"
            href="#resizeLimit"
            title="Permalink to GameLoopHtml.resizeLimit">#</a>
        </h4>
        <div class="doc">
<p>The minimum amount of time between two onResize calls in seconds</p>
<pre class="source">
double resizeLimit = 0.05
</pre>
</div>
</div>
<div class="field inherited"><h4 id="time">
<button class="show-code">Code</button>
final double         <strong>time</strong> <a class="anchor-link"
            href="#time"
            title="Permalink to GameLoopHtml.time">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../game_loop_common/GameLoop.html">GameLoop</a> </div><div class="doc">
<p>Current time. </p>
<pre class="source">
double get time =&gt; timeStampToSeconds(
   new DateTime.now().millisecondsSinceEpoch);
</pre>
</div>
</div>
<div class="field"><h4 id="touchSet">
<button class="show-code">Code</button>
final <a href="../game_loop_html/GameLoopTouchSet.html">GameLoopTouchSet</a>         <strong>touchSet</strong> <a class="anchor-link"
            href="#touchSet"
            title="Permalink to GameLoopHtml.touchSet">#</a>
        </h4>
        <div class="doc">
<pre class="source">
GameLoopTouchSet get touchSet =&gt; _touchSet;
</pre>
</div>
</div>
<div class="field inherited"><h4 id="updateTimeStep">
<button class="show-code">Code</button>
double         <strong>updateTimeStep</strong> <a class="anchor-link"
            href="#updateTimeStep"
            title="Permalink to GameLoopHtml.updateTimeStep">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../game_loop_common/GameLoop.html">GameLoop</a> </div><div class="doc">
<p>The time step used for game updates. </p>
<pre class="source">
double updateTimeStep = 0.015
</pre>
</div>
</div>
<div class="field"><h4 id="width">
<button class="show-code">Code</button>
final int         <strong>width</strong> <a class="anchor-link"
            href="#width"
            title="Permalink to GameLoopHtml.width">#</a>
        </h4>
        <div class="doc">
<p>Width of game display <code>Element</code> </p>
<pre class="source">
int get width =&gt; element.client.width;
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method inherited"><h4 id="addTimer">
<button class="show-code">Code</button>
<a href="../game_loop_common/GameLoopTimer.html">GameLoopTimer</a> <strong>addTimer</strong>(<a href="../game_loop_common/GameLoopTimerFunction.html">GameLoopTimerFunction</a> callback, double delay, {bool periodic: false}) <a class="anchor-link" href="#addTimer"
              title="Permalink to GameLoopHtml.addTimer">#</a></h4>
<div class="inherited-from">inherited from <a href="../game_loop_common/GameLoop.html">GameLoop</a> </div><div class="doc">
<p>Add a new timer which calls 
<span class="param">callback</span> in 
<span class="param">delay</span> seconds. </p>
<pre class="source">
GameLoopTimer addTimer(GameLoopTimerFunction callback, double delay,
                      {bool periodic: false}) {
 var timer = new GameLoopTimer._internal(this, delay, callback,
     _periodic: periodic);
 _timers.add(timer);
 return timer;
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="clearTimers">
<button class="show-code">Code</button>
void <strong>clearTimers</strong>() <a class="anchor-link" href="#clearTimers"
              title="Permalink to GameLoopHtml.clearTimers">#</a></h4>
<div class="inherited-from">inherited from <a href="../game_loop_common/GameLoop.html">GameLoop</a> </div><div class="doc">
<p>Clear all existing timers. </p>
<pre class="source">
void clearTimers() {
 _timers.clear();
}
</pre>
</div>
</div>
<div class="method"><h4 id="enableFullscreen">
<button class="show-code">Code</button>
void <strong>enableFullscreen</strong>(bool enable) <a class="anchor-link" href="#enableFullscreen"
              title="Permalink to GameLoopHtml.enableFullscreen">#</a></h4>
<div class="doc">
<p>Enable or disable fullscreen display of the element. </p>
<pre class="source">
void enableFullscreen(bool enable) {
 if (enable) {
   element.requestFullscreen();
   return;
 }
 document.exitFullscreen();
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="processTimers">
<button class="show-code">Code</button>
void <strong>processTimers</strong>() <a class="anchor-link" href="#processTimers"
              title="Permalink to GameLoopHtml.processTimers">#</a></h4>
<div class="inherited-from">inherited from <a href="../game_loop_common/GameLoop.html">GameLoop</a> </div><div class="doc">
<pre class="source">
void processTimers() {
 int _timersLength = _timers.length;
 for (int i = 0; i &lt; _timersLength; i++) {
   _timers[i]._update(dt);
 }
 for (int i = _timers.length-1; i &gt;= 0; i--) {
   int lastElement = _timers.length-1;
   if (_timers[i]._isDead) {
     if (i != lastElement) {
       // Swap into i's place.
       _timers[i] = _timers[lastElement];
     }
     _timers.removeLast();
   }
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="start">
<button class="show-code">Code</button>
void <strong>start</strong>() <a class="anchor-link" href="#start"
              title="Permalink to GameLoopHtml.start">#</a></h4>
<div class="doc">
<p>Start the game loop. </p>
<pre class="source">
void start() {
 if (_initialized == false) {
   document.onFullscreenError.listen(_fullscreenError);
   document.onFullscreenChange.listen(_fullscreenChange);
   window.onTouchStart.listen(_touchStartEvent);
   window.onTouchEnd.listen(_touchEndEvent);
   window.onTouchMove.listen(_touchMoveEvent);
   window.onKeyDown.listen(_keyDown);
   window.onKeyUp.listen(_keyUp);
   window.onResize.listen(_resize);

   window.onMouseMove.listen(_mouseMove);
   window.onMouseDown.listen(_mouseDown);
   window.onMouseUp.listen(_mouseUp);
   window.onMouseWheel.listen(_mouseWheel);
   _initialized = true;
 }
 _interrupt = false;
 _rafId = window.requestAnimationFrame(_requestAnimationFrame);
}
</pre>
</div>
</div>
<div class="method"><h4 id="stop">
<button class="show-code">Code</button>
void <strong>stop</strong>() <a class="anchor-link" href="#stop"
              title="Permalink to GameLoopHtml.stop">#</a></h4>
<div class="doc">
<p>Stop the game loop. </p>
<pre class="source">
void stop() {
 if (_rafId != null) {
   window.cancelAnimationFrame(_rafId);
   _rafId = null;
 }
 _interrupt = true;
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-06-13 15:38:32.482</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
